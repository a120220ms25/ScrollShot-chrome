# ScrollShot - Chrome 瀏覽器擴充套件

高效能截圖工具，提供類似 Shottr 的截圖、長截圖與即時註釋編輯能力。

## 功能特色

### 📸 四種截圖模式

1. **可見區域截圖 (Alt+Shift+1)**
   - 快速擷取當前瀏覽器視窗的可見內容

2. **完整網頁長截圖 (Alt+Shift+2)** ⭐ 核心功能
   - 自動捲動並擷取整個網頁
   - 從頁面頂部到底部完整截圖
   - 支援超長頁面

3. **選定區域截圖 (Alt+Shift+3)**
   - 十字游標自由選擇截圖範圍
   - 精確控制截圖區域

4. **元素截圖 (Alt+Shift+4)**
   - 滑鼠懸停高亮網頁元素
   - 點擊即可截取特定元素

### ✏️ 強大的編輯工具

- **箭頭與線條 (E1)**: 繪製可調整顏色和粗細的箭頭、直線
- **文字註釋 (E2)**: 插入文字框，支援字體大小和顏色調整
- **形狀工具 (E3)**: 繪製矩形、圓形，可選擇邊框或填充
- **馬賽克/模糊 (E4)** ⭐ 關鍵功能: 隱藏敏感資訊的像素化或模糊處理
- **裁剪工具 (E5)**: 重新定義截圖邊界
- **撤銷/重做 (E7)**: 無限級別的操作撤銷與重做
- **縮放查看 (A1)**: 方便檢查長截圖細節

### 💾 輸出選項

- **複製到剪貼簿 (O2)**: 一鍵複製編輯完成的圖片
- **下載圖片 (O1)**: 儲存為 PNG 格式

## 安裝方式

### 方法一：開發者模式安裝（本地測試）

1. 開啟 Chrome 瀏覽器
2. 前往 `chrome://extensions/`
3. 啟用右上角的「開發人員模式」
4. 點擊「載入未封裝項目」
5. 選擇此專案的資料夾
6. 完成！擴充套件圖標會出現在瀏覽器工具列

### 方法二：封裝安裝

1. 在 `chrome://extensions/` 頁面
2. 點擊「封裝擴充功能」
3. 選擇此專案資料夾
4. 產生 `.crx` 檔案
5. 拖曳 `.crx` 檔案到擴充功能頁面安裝

## 使用方式

### 啟動截圖

有三種方式啟動截圖：

1. **點擊擴充功能圖標** → 從選單選擇截圖模式
2. **使用快捷鍵**：
   - `Alt+Shift+1`: 可見區域截圖
   - `Alt+Shift+2`: 完整網頁截圖
   - `Alt+Shift+3`: 選定區域截圖
   - `Alt+Shift+4`: 元素截圖
3. **右鍵選單** → ScrollShot 截圖 → 選擇模式

### 編輯截圖

截圖完成後會自動開啟編輯器：

1. 從工具列選擇編輯工具
2. 調整顏色、線條粗細等參數
3. 在截圖上進行標註
4. 使用 `Ctrl+Z` / `Ctrl+Y` 撤銷/重做
5. 完成後點擊「複製」或「下載」

### 快捷鍵

編輯器快捷鍵：
- `Ctrl/Cmd + Z`: 撤銷
- `Ctrl/Cmd + Y` 或 `Ctrl/Cmd + Shift + Z`: 重做
- `Ctrl/Cmd + C`: 複製到剪貼簿
- `Ctrl/Cmd + S`: 下載圖片
- `Esc`: 取消當前操作

## 檔案結構

```
ScrollShot/
├── manifest.json          # 擴充功能設定檔
├── background.js          # 背景腳本（事件處理）
├── popup.html             # 彈出選單 HTML
├── popup.js               # 彈出選單邏輯
├── content.js             # 內容腳本（截圖邏輯）
├── editor.html            # 編輯器介面
├── editor.js              # 編輯器邏輯
├── editor.css             # 編輯器樣式
├── icons/                 # 圖標資料夾
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
└── README.md              # 說明文件
```

## 技術實作

### 截圖技術

- **可見區域**: 使用 `chrome.tabs.captureVisibleTab` API
- **完整網頁**: 自動捲動 + 多次截圖 + Canvas 合併
- **選定區域**: 覆蓋層 + 滑鼠事件 + 座標計算
- **元素截圖**: DOM 元素檢測 + 邊界計算

### 編輯器技術

- **繪圖引擎**: HTML5 Canvas API
- **雙層 Canvas**: 主畫布 + 繪圖預覽層
- **歷史記錄**: Base64 圖片數據陣列
- **馬賽克**: 像素平均色計算
- **模糊**: 盒式模糊演算法

## 權限說明

此擴充功能需要以下權限：

- `activeTab`: 存取當前活動標籤頁
- `storage`: 儲存截圖數據
- `tabs`: 管理標籤頁和截圖
- `contextMenus`: 建立右鍵選單
- `scripting`: 注入內容腳本
- `<all_urls>`: 在所有網站上運行（截圖需求）

## 已知限制

1. 某些網站可能禁止內容腳本注入
2. 跨域 iframe 內容可能無法截圖
3. 動態載入的內容需要等待載入完成
4. 超大網頁（>10000px）可能需要較長處理時間

## 故障排除

### 無法截圖

1. 檢查是否已授予擴充功能權限
2. 重新載入擴充功能
3. 重新整理網頁

### 編輯器無法開啟

1. 檢查瀏覽器是否阻擋彈出視窗
2. 檢查 Console 是否有錯誤訊息
3. 清除擴充功能儲存數據

### 長截圖不完整

1. 等待頁面完全載入後再截圖
2. 關閉頁面的無限捲動功能
3. 嘗試手動捲動到底部後再截圖

## 開發與貢獻

### 本地開發

```bash
# 修改程式碼後
# 1. 前往 chrome://extensions/
# 2. 點擊 ScrollShot 擴充功能的「重新載入」按鈕
# 3. 測試變更
```

### 除錯

- 背景腳本：在擴充功能頁面點擊「檢查視圖」
- 彈出選單：在彈出視窗上右鍵 → 檢查
- 內容腳本：在網頁上 F12 → Console
- 編輯器：在編輯器視窗 F12

## 未來規劃

- [ ] 支援更多圖片格式（JPG、WebP）
- [ ] 雲端同步功能
- [ ] 更多編輯工具（高亮、標記、計數器等）
- [ ] 快速分享到社交媒體
- [ ] OCR 文字辨識
- [ ] 影片錄製功能

## 授權

本專案僅供學習和個人使用。

## 聯絡方式

如有問題或建議，歡迎提出 Issue 或 Pull Request。

---

**ScrollShot** - 讓截圖更簡單、更專業
